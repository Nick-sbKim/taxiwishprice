<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë©´í—ˆ íŒë§¤ í¬ë§ê°€ ë“±ë¡ ì„œë¹„ìŠ¤</title>
<style>
/* í°íŠ¸ ì„í¬íŠ¸: ë‚˜ëˆ”ìŠ¤í€˜ì–´ Bold í°íŠ¸ ì ìš© */
@import url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquare.woff');

/* ************************************************************ */
/* âœ… ìƒìˆ˜ ì •ì˜ */
:root {
--input-gap: 5px;
--input-padding-vertical: 12px;
--mobile-breakpoint: 600px;
/* ì…ë ¥ ê·¸ë£¹ í•˜ë‹¨ ë§ˆì§„ í™•ëŒ€ */
--input-margin-bottom: 35px;

/* --- ğŸ¨ Theme Colors --- */
--main-color: #1976D2;
--light-border-color: #BBDEFB;
--text-color: #333;
--secondary-text-color: #6D4C41;
--label-color: #0D47A1;
--placeholder-color: #9E9E9E;
--input-border: #90CAF9;
--car-unit-bg: #42A5F5;
--car-unit-text: #FFFFFF;
--unified-input-border: 1px solid var(--input-border);
--content-padding: 20px;

/* ë¯¸ì™„ë£Œ/ëŒ€ê¸° ìƒíƒœ ë°°ê²½ìƒ‰ (ë…¸ë€ìƒ‰ ê³„ì—´ ìœ ì§€) */
--input-default-bg: #FFF9C4;
/* ì™„ë£Œ/ì…ë ¥ ìƒíƒœ ë°°ê²½ìƒ‰ (í°ìƒ‰) */
--input-filled-bg: white;

--base-field-height: 50px;
--label-height: 25px;

/* í•­ëª© ì´ë¦„ í°íŠ¸ í¬ê¸° í™•ëŒ€ */
--label-font-size: 1.15em;
--base-font-size: 0.95em;
--input-text-font-weight: 600;
--label-font-weight: 700;

/* í¬ë§ê°€ê²© í…ìŠ¤íŠ¸ í°íŠ¸ ì‚¬ì´ì¦ˆ (1ì–µ, ë§Œì›) */
--price-text-font-size: 1.2em;

/* ë‹ë³´ê¸° íš¨ê³¼ ìƒìˆ˜ */
--focus-font-size: 1.25em; /* í™•ëŒ€ë  í°íŠ¸ í¬ê¸° */
--focus-padding: 18px 10px; /* í¬ì»¤ìŠ¤ ì‹œ íŒ¨ë”© */
}
/* ************************************************************ */
/* ê¸°ë³¸ ì„¤ì • */
body {
font-family: 'NanumSquare', sans-serif;
color: var(--text-color);
display: flex;
justify-content: center;
align-items: flex-start;
min-height: 10vh;
margin: 0;
padding: 15px 10px;
box-sizing: border-box;
background-color: #EFEBE9;
overflow-y: auto;
}
.container { background-color: rgba(255, 255, 255, 0.95); padding: 0; border-radius: 15px; width: 100%; max-width: 500px;
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); border: 2px solid var(--light-border-color); overflow: hidden; }
.header-content { padding: 25px var(--content-padding) 10px; }
h1 {
text-align: center;
margin-bottom: 10px;
font-size: 1.5em;
font-weight: 800;
color: var(--main-color);
line-height: 1.2;
}
.description {
text-align: center;
font-size: 1.0em;
color: red;
margin-bottom: 25px;
padding: 0 5px;
font-weight: 600;
line-height: 1.5;
}
.step { display: none; }
.step.active { display: block; }
.step-content { padding: 20px var(--content-padding); margin: 0 var(--content-padding) 20px var(--content-padding); border-radius: 10px; border: 1px solid var(--input-border); background-color: #F8F8F8; }
.section-title { font-size: 1.2em; font-weight: 800; color: var(--label-color); margin-bottom: 25px; padding-bottom: 5px; border-bottom: 1px dashed #BDBDBD; }
.input-group {
display: flex;
flex-wrap: wrap;
margin-bottom: var(--input-margin-bottom);
position: relative;
align-items: center;
}
.input-group label {
width: 100px;
flex-shrink: 0;
font-size: var(--label-font-size);
font-weight: var(--label-font-weight);
color: var(--label-color);
white-space: nowrap;
height: var(--base-field-height);
padding-right: 10px;
box-sizing: border-box;
display: flex;
align-items: center;
}
.input-field-wrapper {
margin-left: 0;
width: calc(100% - 100px);
flex-grow: 1;
}
.input-group.stack-label-group {
flex-direction: column;
align-items: flex-start;
margin-bottom: var(--input-margin-bottom);
}
.input-group.stack-label-group label {
width: 100%;
height: var(--label-height);
margin-bottom: 5px;
align-items: center;
text-align: center;
padding: 0;
font-size: var(--label-font-size);
}
.input-group.stack-label-group .input-field-wrapper {
width: 100%;
margin-left: 0;
}
.input-field-wrapper input[type="text"], .input-field-wrapper select {
width: 100%;
height: var(--base-field-height);
padding: 0 10px;
line-height: var(--base-field-height);
border: 1px solid var(--input-border);
border-radius: 8px;
box-sizing: border-box;
font-size: var(--base-font-size);
font-weight: var(--input-text-font-weight);
color: var(--text-color);
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
min-width: 0;
text-align: center;
background-color: var(--input-default-bg);
transition: background-color 0.3s, font-size 0.3s, padding 0.3s;
}

#name, #phone { text-align: center !important; }
#name::placeholder, .split-unit-wrapper input#phone::placeholder, #licensePriceInput::placeholder { text-align: center; }

.data-input-field:focus, .select-field:focus {
font-size: var(--focus-font-size) !important; padding: var(--focus-padding) !important; height: calc(var(--base-field-height) + 10px) !important; line-height: calc(var(--base-field-height) + 10px) !important; font-weight: 800 !important; box-shadow: 0 0 10px rgba(25, 118, 210, 0.5); background-color: var(--input-default-bg) !important;
}

.data-input-field.completed, .select-field.completed {
background-color: var(--input-filled-bg) !important; font-size: var(--price-text-font-size) !important; padding: 0 10px !important; height: var(--base-field-height) !important; line-height: var(--base-field-height) !important; font-weight: 800 !important;
}

.select-box, .car-hangul-box { position: relative; }
.select-box::after, .car-hangul-box::after { content: 'â–¼'; position: absolute; top: 50%; right: 10px; transform: translateY(-50%); font-size: 0.8em; color: var(--label-color); pointer-events: none; z-index: 10; transition: opacity 0.3s; }
.select-box.selected::after, .car-hangul-box.selected::after { opacity: 0; }

.split-unit-wrapper { display: flex; align-items: center; width: 100%; border: var(--unified-input-border); border-radius: 8px; overflow: hidden; height: var(--base-field-height); }
.split-unit-wrapper input { width: auto; flex-grow: 1; height: 100%; border: none !important; border-radius: 0; padding: 0 10px; font-size: var(--base-font-size); outline: none; box-shadow: none; min-width: 100px; line-height: var(--base-field-height); background-color: var(--input-default-bg) !important; }
.split-unit-wrapper input:focus { font-size: var(--focus-font-size) !important; font-weight: 800 !important; padding: 0 10px !important; background-color: var(--input-default-bg) !important; }

.phone-unit-box { height: 100%; display: flex; align-items: center; justify-content: center; font-weight: 800; flex-shrink: 0; padding: 0 10px; color: var(--car-unit-text); background-color: var(--car-unit-bg); font-size: var(--label-font-size); border-right: 1px solid var(--input-border); }

/* ì°¨ëŸ‰ë²ˆí˜¸ ì…ë ¥ë€ ìµœì í™” */
.car-number-split-wrapper { display: flex; gap: 5px; align-items: center; width: 100%; height: var(--base-field-height); }
.car-number-split-wrapper .fixed-unit-button { background-color: var(--car-unit-bg); color: var(--car-unit-text); border: none; border-radius: 8px; font-weight: 700; width: 60px; height: 100%; padding: 0 5px; font-size: var(--base-font-size); line-height: 1.2em; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
.car-number-split-wrapper input.num-part { padding: 0 5px; text-align: center !important; line-height: var(--base-field-height); height: 100%; background-color: var(--input-default-bg); }
#carNumPart1 { flex: 2; max-width: 80px; }
#carNumPart2 { flex: 3; min-width: 90px; }
.car-number-split-wrapper .car-hangul-box { flex: 2; min-width: 60px; }
.car-number-split-wrapper .car-hangul-box select { text-align: left !important; padding-left: 10px !important; }

/* ë©´í—ˆ íŒë§¤ í¬ë§ê°€ê²© ê´€ë ¨ ìŠ¤íƒ€ì¼ */
.price-input-group { display: flex; justify-content: center; align-items: center; width: 100%; gap: 0; }
.unified-price-input { display: flex; align-items: center; height: var(--base-field-height); width: 100%; max-width: 250px; border: none; border-radius: 0; overflow: hidden; box-shadow: none; background-color: transparent; }
.unified-price-input .price-fixed-text { flex-shrink: 0; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: var(--price-text-font-size); color: black; background-color: transparent; border: none; border-radius: 0; box-sizing: border-box; padding: 0 5px 0 0; }
.unified-price-input input { width: 30%; flex-grow: 0; min-width: 40px; height: 100%; border: 1px solid var(--input-border); border-radius: 8px; background-color: var(--input-default-bg); padding: 0 3px; text-align: center; font-size: 1.2em; font-weight: 900; box-sizing: border-box; }
.unified-price-input input:focus { font-size: 1.5em !important; padding: 0 3px !important; height: 100% !important; line-height: 100% !important; font-weight: 900 !important; box-shadow: 0 0 10px rgba(25, 118, 210, 0.5); background-color: var(--input-default-bg) !important; }
.unified-price-input input.completed { background-color: var(--input-filled-bg) !important; font-size: var(--price-text-font-size) !important; font-weight: 900 !important; }
.unified-price-input .price-unit-text { flex-shrink: 0; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: var(--price-text-font-size); color: black; background-color: transparent; border: none; border-radius: 0; box-sizing: border-box; padding: 0 0 0 5px; }

/* ë™ì˜ ì„¹ì…˜ (1ë‹¨ê³„ì— í¬í•¨ë¨) */
.consent-section { padding: 0 var(--content-padding); margin: 10px 0 25px 0; }
.consent-group { display: flex; align-items: center; margin-bottom: 15px; font-size: 1.1em; }
.consent-group input[type="checkbox"] { width: 22px; height: 22px; margin-right: 12px; flex-shrink: 0; }
.consent-label { font-weight: 800; color: #333; cursor: pointer; }
.consent-details { border: 1px solid #E0E0E0; background-color: #FAFAFA; padding: 10px 15px; border-radius: 8px; font-size: 0.85em; line-height: 1.5; color: #757575; max-height: 100px; overflow-y: auto; margin-bottom: 0; }

.footer-content { padding: 0 var(--content-padding) 25px; }
.button-group { display: flex; gap: 10px; margin-top: 25px; }

.prev-btn {
    width: 80px; padding: 15px 10px; background-color: #CFD8DC; color: var(--text-color); border: none; border-radius: 10px; font-weight: 800; font-size: 1.3em; cursor: pointer; flex-shrink: 0; display: flex; justify-content: center; align-items: center; line-height: 1; position: static;
}
.prev-btn::before { content: none; }

#nextBtn, #submitBtn { flex-grow: 1; padding: 18px 20px; background-color: var(--main-color); color: white; border: none; border-radius: 10px; font-size: 1.3em; font-weight: 800; cursor: pointer; box-shadow: 0 4px 10px rgba(25, 118, 210, 0.4); }

@media (max-width: var(--mobile-breakpoint)) {
/* ... (ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ ìœ ì§€) ... */
.input-group:not(.stack-label-group) { flex-direction: column; align-items: flex-start; }
.input-group:not(.stack-label-group) label { width: 100%; margin-bottom: 5px; line-height: 1.2; height: auto; padding: 0; }
.input-group:not(.stack-label-group) .input-field-wrapper { width: 100%; }
.car-number-split-wrapper { flex-wrap: nowrap; gap: 5px; }
.car-number-split-wrapper .fixed-unit-button { width: 45px; font-size: var(--base-font-size); flex-grow: 0; }
#carNumPart1 { max-width: none; flex: 2.5; }
.car-number-split-wrapper .car-hangul-box { max-width: none; flex: 2; }
#carNumPart2 { max-width: none; flex: 4; }
.split-unit-wrapper input { min-width: 70px; }
.unified-price-input { max-width: 100%; }
.unified-price-input .price-fixed-text,
.unified-price-input .price-unit-text { font-size: 1.0em; padding: 0 3px; }
.unified-price-input input { font-size: 1.1em; }
.data-input-field:focus { font-size: 1.1em !important; height: var(--base-field-height) !important; line-height: var(--base-field-height) !important; }
.unified-price-input input:focus { font-size: 1.2em !important; }
.data-input-field.completed { font-size: 1.1em !important; }
}
</style>
</head>
<body>
<div class="container">
<form id="carForm"
action="https://docs.google.com/forms/d/e/1FAIpQLSeLOvKf_UYk9DoaQc7B9f2LvquBEbYyGWk2_0iNEjNx3syzaQ/formResponse"
method="POST"
target="hidden_iframe">
<div class="header-content">
<h1>ë©´í—ˆ íŒë§¤ í¬ë§ê°€ ë“±ë¡ ì„œë¹„ìŠ¤</h1>
<p class="description">ì‹œì„¸ê°€ í¬ë§ê°€ ë„ë‹¬ ì „ì— ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
</div>
<input type="hidden" name="fvv" value="1">
<input type="hidden" name="pageHistory" value="0">
<input type="hidden" name="fbzx" value="3762433657792349989">
<input type="hidden" name="submissionTimestamp" value="-1">

<input type="hidden" id="phoneHidden" name="entry.1565385945" value="">
<input type="hidden" id="carNumberHidden" name="entry.1961657672" value="">
<input type="hidden" id="licensePriceHidden" name="entry.770593956" id="licensePriceHidden" value="">
<input type="hidden" name="entry.375840374" value="ì˜ˆ"> 


<div class="step active" id="step1">
    <div class="step-content">
        <div class="section-title">1ë‹¨ê³„ : ì—°ë½ì²˜ ë° ë™ì˜</div>
        
        <div class="input-group">
            <label for="name">ì„±í•¨</label>
            <div class="input-field-wrapper">
                <input type="text"
                    id="name"
                    name="entry.1672689448"
                    required
                    placeholder="ì„±í•¨ ì…ë ¥" class="data-input-field">
            </div>
        </div>

        <div class="input-group">
            <label for="phone">ì „í™”ë²ˆí˜¸</label>
            <div class="input-field-wrapper">
                <div class="split-unit-wrapper">
                    <span class="phone-unit-box">010 -</span>
                    <input type="text"
                        id="phone"
                        name="entry.399912440"
                        required
                        placeholder="8ìë¦¬ ì…ë ¥" inputmode="numeric"
                        maxlength="9"
                        class="phone-input-field data-input-field">
                </div>
            </div>
        </div>

        <div class="consent-section">
            <div class="consent-group">
                <input type="checkbox" id="consent" name="entry.989111915" value="ì˜ˆ" required>
                <label for="consent" class="consent-label">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
            </div>
            <div class="consent-details">
                <p><strong>[ê°œì¸ì •ë³´ìˆ˜ì§‘ ë° ì´ìš©ë™ì˜ ìƒì„¸]</strong></p>
                <p>1. ìˆ˜ì§‘ í•­ëª©: ì„±í•¨, íœ´ëŒ€í° ë²ˆí˜¸, ì°¨ëŸ‰ë²ˆí˜¸, ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²©</p>
                <p>2. ìˆ˜ì§‘ ëª©ì : íƒì‹œë©´í—ˆ ì‹œì„¸ ë³€ë™ ì•Œë¦¼ ë° íŒë§¤ ìƒë‹´ ì§„í–‰</p>
                <p>3. ë³´ìœ  ë° ì´ìš© ê¸°ê°„: ë™ì˜ì¼ë¡œë¶€í„° 3ë…„</p>
                <p>4. ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ: ì„œë¹„ìŠ¤ ì œí•œ</p>
                <p>â€» ì¶”ê°€ ë‚´ìš©: ë³¸ ì„œë¹„ìŠ¤ëŠ” ê·€í•˜ì˜ ë“±ë¡ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¸ê·¼ ì‹œì„¸ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ìµœì¢… ê±°ë˜ ê°€ê²©ì€ ì‹œì¥ ìƒí™© ë° ê°œë³„ í˜‘ìƒì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œê³µëœ ì •ë³´ê°€ í—ˆìœ„ì¼ ê²½ìš°, ì•Œë¦¼ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
        </div>
        
    </div>
    <div class="footer-content">
        <div class="button-group">
            <button type="button" id="nextBtn" onclick="nextStep(1)">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
        </div>
    </div>
</div>

<div class="step" id="step2">
    <div class="step-content">
        <div class="section-title">2ë‹¨ê³„ : ì°¨ëŸ‰ ë° í¬ë§ê°€ê²©</div>

        <div class="input-group car-number-group stack-label-group">
            <label>ì°¨ëŸ‰ë²ˆí˜¸ ì…ë ¥ (ì˜ˆì‹œ : ì„œìš¸30ì•„1234)</label>
            <div class="input-field-wrapper">
                <div class="car-number-split-wrapper">
                    <button type="button" class="fixed-unit-button">ì„œìš¸</button>
                    <input type="text"
                        id="carNumPart1"
                        name="entry.525308498"
                        required
                        placeholder="2ìë¦¬"
                        maxlength="2"
                        inputmode="numeric"
                        class="num-part data-input-field">
                    <div class="select-box car-hangul-box">
                        <select id="carHangulSelect" name="entry.825692217" required class="select-field">
                            <option value="" disabled selected>ì„ íƒ</option>
                            <option value="ì•„">ì•„</option>
                            <option value="ë°”">ë°”</option>
                            <option value="ì‚¬">ì‚¬</option>
                            <option value="ì">ì</option>
                        </select>
                    </div>
                    <input type="text"
                        id="carNumPart2"
                        name="entry.560773274"
                        required
                        placeholder="4ìë¦¬"
                        maxlength="4"
                        inputmode="numeric"
                        class="num-part data-input-field">
                </div>
            </div>
        </div>

        <div class="input-group stack-label-group">
            <label>ë©´í—ˆíŒë§¤ í¬ë§ê°€(ì°¨ëŸ‰ê°€ê²© ì œì™¸)</label>
            <div class="input-field-wrapper">
                <div class="price-input-group">
                    <div class="unified-price-input">
                        <span class="price-fixed-text">1ì–µ</span>
                        <input type="text"
                            id="licensePriceInput"
                            name="entry.234394058"
                            placeholder="ìˆ«ìì…ë ¥"
                            inputmode="numeric"
                            maxlength="4"
                            class="data-input-field"
                            required>
                        <span class="price-unit-text">ë§Œì›</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-content">
        <div class="button-group">
            <button type="button" class="prev-btn" onclick="prevStep(2)">ë’¤ë¡œ</button>
            <button type="submit" id="submitBtn">ì‹ ì²­í•˜ê¸°</button>
        </div>
    </div>
</div>

</form>
</div>
<iframe name="hidden_iframe" id="hidden_iframe"
style="display:none;"
onload="if(submitted) { alert('íƒì‹œë©´í—ˆ íŒë§¤í¬ë§ ê°€ê²© ë“±ë¡ ë° ì•Œë¦¼ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'); window.location='https://licenseprice.licen.co.kr/thankyou.html'; }" ></iframe>
<script>
let currentStep = 1;
const totalSteps = 2;
let submitted = false;

// 1ë‹¨ê³„ í•„ë“œ
const nameInput = document.getElementById('name');
const phoneInput = document.getElementById('phone');
const consentCheckbox = document.getElementById('consent');

// 2ë‹¨ê³„ í•„ë“œ
const carNumPart1 = document.getElementById('carNumPart1');
const carNumPart2 = document.getElementById('carNumPart2');
const carHangulSelect = document.getElementById('carHangulSelect');
const licensePriceInput = document.getElementById('licensePriceInput');

// Hidden í•„ë“œ (ì¡°í•© ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©)
const phoneHidden = document.getElementById('phoneHidden');
const carNumberHidden = document.getElementById('carNumberHidden');
const licensePriceHidden = document.getElementById('licensePriceHidden');


/**
* í•„ë“œ ê°’ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ë°°ê²½ìƒ‰ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
*/
function checkCompletion(element) {
    let isCompleted = false;

    if (element.tagName === 'INPUT') {
        if (element.id === 'phone') {
            const phoneValue = element.value.replace(/[^0-9]/g, '');
            isCompleted = phoneValue.length === 8;
        } else if (element.id === 'carNumPart1') {
            isCompleted = element.value.trim().length === 2;
        } else if (element.id === 'carNumPart2') {
            isCompleted = element.value.trim().length === 4;
        } else if (element.id === 'name') {
            isCompleted = element.value.trim() !== '';
        } else if (element.id === 'licensePriceInput') {
            isCompleted = element.value.trim() !== '' && !isNaN(parseInt(element.value.trim()));
        }
    } else if (element.tagName === 'SELECT') {
        isCompleted = element.value !== '' && element.options.length > 0 && !element.options[element.selectedIndex].disabled;
    }

    if (isCompleted) {
        element.classList.add('completed');
    } else {
        element.classList.remove('completed');
    }
}

/**
* Select Boxì— ë“œë¡­ë‹¤ìš´ ì•„ì´ì½˜ í‘œì‹œë¥¼ ì œì–´í•©ë‹ˆë‹¤.
*/
function toggleSelectArrow(selectElement) {
    const selectBox = selectElement.parentElement;
    if (!selectBox) return;
    if (selectElement.value && selectElement.options.length > 0 && !selectElement.options[selectElement.selectedIndex].disabled) {
        selectBox.classList.add('selected');
    } else {
        selectBox.classList.remove('selected');
    }
}

document.getElementById('carForm').addEventListener('submit', function(event) {
    
    // 1. 1ë‹¨ê³„ ìœ íš¨ì„± ê²€ì‚¬ (ì„±í•¨/ì „í™”ë²ˆí˜¸/ë™ì˜)
    if (!validateStep1(true)) {
        updateStep(1);
        alert('1ë‹¨ê³„ ì—°ë½ì²˜ ë° ë™ì˜ ì •ë³´ë¥¼ ë¨¼ì € ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        event.preventDefault();
        return;
    }

    // 2. 2ë‹¨ê³„ ìœ íš¨ì„± ê²€ì‚¬ (ì°¨ëŸ‰ë²ˆí˜¸/í¬ë§ê°€ê²©)
    if (!validateStep2()) {
        updateStep(2);
        event.preventDefault();
        return;
    }

    // 3. ëª¨ë“  ê²€ì‚¬ í†µê³¼ í›„, ì „ì†¡ ì§ì „ì— Hidden í•„ë“œì— ìµœì¢… ê°’ ì„¤ì •
    
    // 3-1. ì „í™”ë²ˆí˜¸ Hidden í•„ë“œ ê°’ ì„¤ì • (010-XXXX-XXXX í˜•ì‹)
    const phoneValue = phoneInput.value.replace(/[^0-9]/g, '');
    phoneHidden.value = '010-' + phoneValue.slice(0, 4) + '-' + phoneValue.slice(4);
    
    // 3-2. í¬ë§ê°€ê²© Hidden í•„ë“œ ê°’ ì„¤ì • (1ì–µ [ìˆ«ì]ë§Œì› í˜•ì‹)
    licensePriceHidden.value = `1ì–µ ${licensePriceInput.value.trim()}ë§Œì›`;

    // 3-3. ì°¨ëŸ‰ë²ˆí˜¸ Hidden í•„ë“œ ê°’ ì„¤ì • (ì„œìš¸[2ìë¦¬][í•œê¸€][4ìë¦¬] í˜•ì‹)
    const part1Value = carNumPart1.value.trim();
    const part2Value = carNumPart2.value.trim();
    const hangulValue = carHangulSelect.value;
    carNumberHidden.value = `ì„œìš¸${part1Value}${hangulValue}${part2Value}`;

    // Note: ê°œì¸ì •ë³´ ë™ì˜ëŠ” ì´ì œ Forms í•„ë“œ(entry.989111915)ì— ì§ì ‘ ì „ì†¡ë©ë‹ˆë‹¤.
    
    // 4. ìµœì¢… ì œì¶œ
    submitted = true;
});

function updateStep(step) {
    currentStep = step;
    for (let i = 1; i <= totalSteps; i++) {
        const stepElement = document.getElementById(`step${i}`);
        if (i === currentStep) {
            stepElement.classList.add('active');
        } else {
            stepElement.classList.remove('active');
        }
    }
    document.querySelector('.container').scrollTop = 0;
    window.scrollTo(0, 0);
}

function nextStep(step) {
    if (step === 1) {
        // ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•ŒëŠ” ë™ì˜ í•­ëª©ì„ ê²€ì‚¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì œì¶œ ì‹œì—ë§Œ ê²€ì‚¬)
        if (validateStep1(false)) { 
            updateStep(2);
        }
    }
}

function prevStep(step) {
    if (step === 2) {
        updateStep(1);
    }
}

function validateStep1(isSubmit = false) {
    const phoneValue = phoneInput.value.replace(/[^0-9]/g, '');
    
    // 1. ì„±í•¨
    if (!nameInput.value.trim()) {
        if (!isSubmit) alert('ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        if (!isSubmit) nameInput.focus();
        return false;
    }
    // 2. ì „í™”ë²ˆí˜¸
    if (phoneValue.length !== 8) {
        if (!isSubmit) alert('ì „í™”ë²ˆí˜¸ ë’· 8ìë¦¬ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        if (!isSubmit) phoneInput.focus();
        return false;
    }
    // 3. ê°œì¸ì •ë³´ ë™ì˜ (ì œì¶œ ì‹œì—ë§Œ ê²€ì‚¬)
    if (isSubmit && !consentCheckbox.checked) {
        alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ì•¼ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        consentCheckbox.focus();
        return false;
    }
    
    return true;
}

function validateStep2() {
    const part1Value = carNumPart1.value.trim();
    const part2Value = carNumPart2.value.trim();
    const hangulValue = carHangulSelect.value;

    // 1. ì°¨ëŸ‰ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
    if (part1Value.length !== 2 || !/^\d+$/.test(part1Value) || part2Value.length !== 4 || !/^\d{4}$/.test(part2Value) || !hangulValue) {
        alert('ì°¨ëŸ‰ë²ˆí˜¸ì˜ ëª¨ë“  ë¶€ë¶„(2ìë¦¬, ë¬¸ì, 4ìë¦¬)ì„ ì •í™•íˆ ì…ë ¥í•˜ê±°ë‚˜ ì„ íƒí•´ì£¼ì„¸ìš”.');
        if (part1Value.length !== 2) carNumPart1.focus();
        else if (!hangulValue) carHangulSelect.focus();
        else carNumPart2.focus();
        return false;
    }

    // 2. ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²© ìœ íš¨ì„± ê²€ì‚¬
    const priceValue = licensePriceInput.value.trim();
    if (!priceValue || isNaN(parseInt(priceValue))) {
        alert('ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²©ì„ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        licensePriceInput.focus();
        return false;
    }
    
    return true;
}

// ************************************************************
// ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
// ************************************************************
const inputFields = document.querySelectorAll('.data-input-field');
const selectFields = document.querySelectorAll('.select-field');

inputFields.forEach(input => {
    input.addEventListener('input', function() { checkCompletion(this); });
    input.addEventListener('change', function() { checkCompletion(this); });
    input.addEventListener('blur', function() { checkCompletion(this); });
});

selectFields.forEach(select => {
    select.addEventListener('change', function() { checkCompletion(this); toggleSelectArrow(this); });
    select.addEventListener('blur', function() { checkCompletion(this); });
});

phoneInput.addEventListener('input', function(e) {
    let value = e.target.value.replace(/[^0-9]/g, '');
    if (value.length > 8) { value = value.slice(0, 8); }
    let result = '';
    if (value.length <= 4) { result = value; }
    else { result = value.slice(0, 4) + '-' + value.slice(4); }
    e.target.value = result;
    checkCompletion(e.target);
});

carNumPart1.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 2);
    checkCompletion(e.target);
});

carNumPart2.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 4);
    checkCompletion(e.target);
});

licensePriceInput.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 4);
    checkCompletion(e.target);
});


document.addEventListener('DOMContentLoaded', function() {
    updateStep(1);
    document.querySelectorAll('.data-input-field, .select-field').forEach(element => {
        checkCompletion(element);
        if (element.tagName === 'SELECT') {
            toggleSelectArrow(element);
        }
    });
});
</script>
</body>
</html>
