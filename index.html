<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>íƒì‹œë©´í—ˆ íŒë§¤í¬ë§ ê°€ê²©ë“±ë¡ / ì•Œë¦¼ì‹ ì²­</title>
<style>
/* í°íŠ¸ ì„í¬íŠ¸: ë‚˜ëˆ”ìŠ¤í€˜ì–´ Bold í°íŠ¸ ì ìš© */
@import url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquare.woff');

/* ************************************************************ */
/* âœ… ìƒìˆ˜ ì •ì˜ (ë†’ì´ê°’ ì¡°ì •) */
:root {
    --input-gap: 5px;
    --input-padding-vertical: 12px;
    --mobile-breakpoint: 600px;
    --input-margin-bottom: 25px;

    /* --- ğŸ¨ Theme Colors --- */
    --main-color: #1976D2;
    --light-border-color: #BBDEFB;
    --text-color: #333;
    --secondary-text-color: #6D4C41;
    --label-color: #0D47A1;
    --placeholder-color: #9E9E9E;
    --input-border: #90CAF9;
    --unit-bg-color: white;
    --unit-text-color: #333;
    --car-unit-bg: #42A5F5;
    --car-unit-text: #FFFFFF;
    --unified-input-border: 1px solid var(--input-border);
    --content-padding: 20px;

    /* ë¯¸ì™„ë£Œ/ëŒ€ê¸° ìƒíƒœ ë°°ê²½ìƒ‰ */
    --input-default-bg: #FFF9C4;
    /* ì™„ë£Œ/ì…ë ¥ ìƒíƒœ ë°°ê²½ìƒ‰ */
    --input-filled-bg: white;

    --base-field-height: 50px;
    --label-height: 25px;

    /* í•­ëª© ì´ë¦„ í°íŠ¸ í¬ê¸° */
    --label-font-size: 1.05em;
    --base-font-size: 0.95em;
    --input-text-font-weight: 600;
    --label-font-weight: 700;
    
    /* âœ… ì‹ ê·œ ì¶”ê°€: ì‹œì„¸ ì•Œë¦¼ ë²„íŠ¼ìš© ìƒ‰ìƒ */
    --accent-color: #FFEB3B; 
}
/* ************************************************************ */
/* ê¸°ë³¸ ì„¤ì • */
body {
    font-family: 'NanumSquare', sans-serif;
    color: var(--text-color);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    margin: 0;
    padding: 15px 10px;
    box-sizing: border-box;
    background-color: #EFEBE9;
    overflow-y: auto;
}
.container { background-color: rgba(255, 255, 255, 0.95); padding: 0; border-radius: 15px; width: 100%; max-width: 500px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); border: 2px solid var(--light-border-color); overflow: hidden; }
.header-content { padding: 25px var(--content-padding) 10px; }
h1 { text-align: center; margin-bottom: 15px; font-size: 1.7em; font-weight: 800; color: var(--main-color); line-height: 1.2; }
.description {
    text-align: center;
    font-size: 1.0em;
    color: var(--secondary-text-color);
    margin-bottom: 25px;
    padding: 0 5px;
    font-weight: 600;
    line-height: 1.5;
}
.step { display: none; }
.step.active { display: block; }
.step-content { padding: 20px var(--content-padding); margin: 0 var(--content-padding) 20px var(--content-padding); border-radius: 10px; border: 1px solid var(--input-border); background-color: #F8F8F8; }
.section-title { font-size: 1.2em; font-weight: 800; color: var(--label-color); margin-bottom: 25px; padding-bottom: 5px; border-bottom: 1px dashed #BDBDBD; }
/* ----------------------------------- */
/* ë‹¨ê³„ ì•ˆë‚´ ë°” ìŠ¤íƒ€ì¼ */
/* ----------------------------------- */
.progress-bar-container { display: flex; justify-content: space-between; align-items: center; position: relative; margin-bottom: 30px; padding: 0 20px; }
.progress-bar-container::before { content: ''; position: absolute; top: 15px; left: 50%; transform: translate(-50%, -50%); width: calc(100% - 80px); height: 4px; background-color: var(--light-border-color); z-index: 0; }
.step-indicator { text-align: center; position: relative; z-index: 1; color: var(--secondary-text-color); font-size: 0.9em; font-weight: 600; }
.step-circle { width: 30px; height: 30px; border-radius: 50%; background-color: #EEEEEE; color: #757575; display: flex; justify-content: center; align-items: center; margin: 0 auto 5px; font-weight: 800; border: 2px solid #BDBDBD; transition: all 0.3s; }
.step-indicator.active .step-circle { background-color: var(--main-color); color: white; border-color: var(--main-color); box-shadow: 0 0 0 5px rgba(25, 118, 210, 0.2); }
.step-indicator.active .step-text { color: var(--main-color); }
.step-indicator.completed .step-circle { background-color: #E0E0E0; color: white; border-color: #E0E0E0; }
/* ----------------------------------- */
/* ê¸°ë³¸ ì¸í’‹ ê·¸ë£¹ (1ë‹¨ê³„ ì—°ë½ì²˜ ì •ë³´) */
.input-group {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: var(--input-margin-bottom);
    position: relative;
    align-items: center;
}
.input-group label {
    width: 100px;
    flex-shrink: 0;
    font-size: var(--label-font-size);
    font-weight: var(--label-font-weight);
    color: var(--label-color);
    white-space: nowrap;
    height: var(--base-field-height);
    padding-right: 10px;
    box-sizing: border-box;
    display: flex;
    align-items: center;
}
.input-field-wrapper {
    margin-left: 0;
    width: calc(100% - 100px);
    flex-grow: 1;
}
/* ìŠ¤íƒí˜• ë¼ë²¨ ê·¸ë£¹ (2ë‹¨ê³„) */
.input-group.stack-label-group {
    flex-direction: column;
    align-items: flex-start;
}
.input-group.stack-label-group label {
    width: 100%;
    height: var(--label-height);
    margin-bottom: 5px;
    align-items: center;
    text-align: left; /* ì™¼ìª½ ì •ë ¬ */
    padding: 0;
    font-size: var(--label-font-size);
}
.input-group.stack-label-group .input-field-wrapper {
    width: 100%;
    margin-left: 0;
}
/* ì¼ë°˜ ì…ë ¥ í•„ë“œ ê³µí†µ ìŠ¤íƒ€ì¼ */
.input-field-wrapper input[type="text"], .input-field-wrapper select {
    width: 100%;
    height: var(--base-field-height);
    padding: 0 10px;
    line-height: var(--base-field-height);
    border: 1px solid var(--input-border);
    border-radius: 8px;
    box-sizing: border-box;
    font-size: var(--base-font-size);
    font-weight: var(--input-text-font-weight);
    color: var(--text-color);
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    min-width: 0;
    text-align: center;
    background-color: var(--input-default-bg);
    transition: background-color 0.3s, font-size 0.3s, padding 0.3s;
}
/* 1ë‹¨ê³„ ì„±í•¨/ì „í™”ë²ˆí˜¸ ì…ë ¥ í•„ë“œëŠ” ì™¼ìª½ ì •ë ¬ ìœ ì§€ (ì…ë ¥ëœ ë°ì´í„°) */
#name, #phone {
    text-align: left !important;
}
/* ----------------------------------- */
/* âœ… ì™„ë£Œ/í¬ì»¤ìŠ¤ ì‹œ ë°°ê²½ìƒ‰: í°ìƒ‰ (input, select ëª¨ë‘ ì ìš©) */
.data-input-field:focus,
.data-input-field.completed,
.select-field.completed {
    background-color: var(--input-filled-bg) !important;
}
/* ë‹ë³´ê¸° ëª¨ë“œ ìŠ¤íƒ€ì¼ (ìœ ì§€) */
.data-input-field:focus {
    font-size: 1.5em !important;
    padding: 0 10px !important;
    height: auto !important;
    line-height: 1.4em !important;
    font-weight: 800 !important;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

/* ë‹¨ìœ„ í†µí•© ì…ë ¥ í•„ë“œ (ì „í™”ë²ˆí˜¸) */
.split-unit-wrapper { display: flex; align-items: center; width: 100%; border: var(--unified-input-border); border-radius: 8px; overflow: hidden; height: var(--base-field-height); }
.split-unit-wrapper input {
    width: auto;
    flex-grow: 1;
    height: 100%;
    border: none !important;
    border-radius: 0;
    padding: 0 10px;
    font-size: var(--base-font-size);
    outline: none;
    box-shadow: none;
    min-width: 100px;
    line-height: var(--base-field-height);
    background-color: var(--input-default-bg) !important;
}
.phone-unit-box {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 800;
    flex-shrink: 0;
    padding: 0 10px;
    color: var(--car-unit-text); 
    background-color: var(--car-unit-bg); 
    font-size: var(--label-font-size); 
    border-right: 1px solid var(--input-border);
}
#phone { text-align: left !important; }

/* ì°¨ëŸ‰ë²ˆí˜¸ ì…ë ¥ë€ ìµœì í™” */
.car-number-split-wrapper {
    display: flex;
    gap: 5px;
    align-items: center;
    width: 100%;
    height: var(--base-field-height);
}
.car-number-split-wrapper .fixed-unit-button {
    background-color: var(--car-unit-bg);
    color: var(--car-unit-text);
    border: none;
    border-radius: 8px;
    font-weight: 700;
    width: 60px;
    height: 100%;
    padding: 0 5px;
    font-size: var(--base-font-size);
    line-height: 1.2em;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}
.car-number-split-wrapper input.num-part {
    padding: 0 5px;
    text-align: center !important;
    line-height: var(--base-field-height);
    height: 100%;
    background-color: var(--input-default-bg);
}
#carNumPart1 { flex: 2; max-width: 80px; }
#carNumPart2 { flex: 3; min-width: 90px; }
.car-number-split-wrapper .car-hangul-box { flex: 2; min-width: 60px; }


/* âœ… ë©´í—ˆ íŒë§¤ í¬ë§ê°€ê²© ê´€ë ¨ ìŠ¤íƒ€ì¼ (ìš”ì²­ ë°˜ì˜) */
.price-input-group {
    display: flex;
    align-items: center;
    gap: 10px; /* '1ì–µ' í…ìŠ¤íŠ¸ì™€ ì…ë ¥ í•„ë“œ ì‚¬ì´ ê°„ê²© */
    width: 100%;
}
.price-unit-box.fixed-text {
    /* '1ì–µ' í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ (ë°°ê²½/í…Œë‘ë¦¬ ì œê±°) */
    color: var(--text-color); 
    background: none;
    height: var(--base-field-height);
    padding: 0;
    display: flex;
    align-items: center;
    font-weight: 800;
    flex-shrink: 0;
    font-size: var(--label-font-size);
}
.price-input-wrapper {
    display: flex;
    align-items: center;
    border: 1px solid var(--input-border);
    border-radius: 8px;
    overflow: hidden;
    height: var(--base-field-height);
    flex-grow: 1;
    max-width: 180px; /* ìˆ«ì ì…ë ¥ë€ ë„ˆë¹„ ì¡°ì • */
}
.price-input-wrapper input {
    width: auto;
    flex-grow: 1;
    min-width: 50px;
    text-align: left !important; /* ìˆ«ì ì…ë ¥ë€ ì™¼ìª½ ì •ë ¬ */
    padding-right: 0; /* ë§Œì› í…ìŠ¤íŠ¸ì™€ ë¶™ì´ê¸° ìœ„í•´ ì œê±° */
    background-color: var(--input-default-bg) !important;
}

/* âœ… ìˆ«ì ì…ë ¥ë€ì— ë¶™ëŠ” 'ë§Œì›' ìŠ¤íƒ€ì¼ (ë°°ê²½/í…Œë‘ë¦¬ ì œê±°, ì™¼ìª½ ì •ë ¬ì— ë¶™ì„) */
.price-unit-box.embedded-unit {
    width: auto; /* ë‚´ìš©ì— ë§ê²Œ ë„ˆë¹„ ì¡°ì • */
    height: 100%;
    color: var(--text-color);
    background-color: var(--input-filled-bg); 
    display: flex;
    align-items: center;
    justify-content: flex-start;
    font-weight: 700;
    flex-shrink: 0;
    font-size: var(--base-font-size);
    padding-left: 0; /* ì…ë ¥ í•„ë“œì™€ ë¶™ì´ê¸° ìœ„í•´ 0 */
    padding-right: 10px; /* ì˜¤ë¥¸ìª½ ì—¬ë°±ë§Œ ìœ ì§€ */
}
/* ì…ë ¥ ì™„ë£Œ ì‹œ í°ìƒ‰ ë°°ê²½ ìœ ì§€ */
.price-input-wrapper input.completed {
    background-color: white !important;
}
.price-input-wrapper input.completed + .embedded-unit {
    background-color: white !important;
}

/* âœ… ì‹œì„¸ ì•Œë¦¼ ì‹ ì²­ ê´€ë ¨ ìŠ¤íƒ€ì¼ (ìš”ì²­ ë°˜ì˜) */
.radio-group.alert-option {
    display: flex;
    gap: 10px;
}
.radio-group.alert-option .radio-label {
    flex: 1;
    height: var(--base-field-height);
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 10px;
    font-size: 1.1em;
    font-weight: 700;
    cursor: pointer;
    border: 2px solid #CFD8DC;
    background-color: #ECEFF1;
    color: var(--text-color);
    transition: all 0.2s;
}
.radio-group.alert-option input[type="radio"] {
    display: none;
}

/* 'ì˜ˆ' ë²„íŠ¼ì„ ë…¸ë€ìƒ‰ìœ¼ë¡œ ìœ ë„ */
.radio-group.alert-option input[value="ì˜ˆ"] + .radio-label {
    background-color: var(--accent-color); /* ê¸°ë³¸ ë…¸ë€ìƒ‰ ë°°ê²½ */
    border-color: var(--accent-color);
}
.radio-group.alert-option input[value="ì˜ˆ"]:checked + .radio-label {
    border-color: #FBC02D;
    background-color: #FBC02D;
    color: var(--text-color);
    box-shadow: 0 4px 10px rgba(255, 235, 59, 0.5);
}
.radio-group.alert-option input[value="ì•„ë‹ˆì˜¤"]:checked + .radio-label {
    border-color: #B0BEC5;
    background-color: #B0BEC5;
    color: white;
}


/* ê¸°íƒ€ ìŠ¤íƒ€ì¼ */
.footer-content { padding: 0 var(--content-padding) 25px; }
/* ê°œì¸ì •ë³´ ë™ì˜ ì˜ì—­ í¬ê¸° ì¦ê°€ */
.consent-group {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    font-size: 1.1em;
}
.consent-group input[type="checkbox"] {
    width: 22px;
    height: 22px;
    margin-right: 12px;
    flex-shrink: 0;
}
.consent-label { font-weight: 800; color: #333; cursor: pointer; }
.consent-details {
    border: 1px solid #E0E0E0;
    background-color: #FAFAFA;
    padding: 10px 15px;
    border-radius: 8px;
    font-size: 0.85em;
    line-height: 1.5;
    color: #757575;
    max-height: 100px;
    overflow-y: auto;
    margin-bottom: 20px;
}
.consent-details strong { color: var(--main-color); }
.button-group { display: flex; gap: 10px; margin-top: 25px; }
.prev-btn { width: 50px; padding: 15px 10px; background-color: #CFD8DC; color: var(--text-color); border: none; border-radius: 10px; font-size: 1.5em; font-weight: 700; cursor: pointer; flex-shrink: 0; display: flex; justify-content: center; align-items: center; line-height: 1; }
#nextBtn, #submitBtn { flex-grow: 1; padding: 18px 20px; background-color: var(--main-color); color: white; border: none; border-radius: 10px; font-size: 1.3em; font-weight: 800; cursor: pointer; box-shadow: 0 4px 10px rgba(25, 118, 210, 0.4); }

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: var(--mobile-breakpoint)) {
    .input-group:not(.stack-label-group) { flex-direction: column; align-items: flex-start; }
    .input-group:not(.stack-label-group) label { width: 100%; margin-bottom: 5px; line-height: 1.2; height: auto; padding: 0; }
    .input-group:not(.stack-label-group) .input-field-wrapper { width: 100%; }

    .car-number-split-wrapper { flex-wrap: nowrap; gap: 5px; }
    .car-number-split-wrapper .fixed-unit-button { width: 45px; font-size: var(--base-font-size); padding: 0 5px; flex-grow: 0; }
    #carNumPart1 { max-width: none; flex: 2.5; }
    .car-number-split-wrapper .car-hangul-box { max-width: none; flex: 2; }
    #carNumPart2 { max-width: none; flex: 4; }
    .split-unit-wrapper input { min-width: 70px; }

    /* ë©´í—ˆ í¬ë§ê°€ê²© ëª¨ë°”ì¼ ìµœì í™” */
    .price-input-group { gap: 5px; }
    .price-input-wrapper { max-width: none; flex-grow: 1; }
    .price-unit-box.fixed-text { font-size: 1.0em; }
}
</style>
</head>
<body>
<div class="container">
<form id="carForm"
    action="https://docs.google.com/forms/d/e/1FAIpQLSclJyEUDbWTfEuDYD1WT6teupgdchWXekhOPs0eGHpC2voH6A/formResponse"
    method="POST"
    target="hidden_iframe">
<div class="header-content">
    <h1>íƒì‹œë©´í—ˆ íŒë§¤í¬ë§ ê°€ê²©ë“±ë¡ / ì•Œë¦¼ì‹ ì²­</h1>
    <p class="description">ì •ë³´ë¥¼ ë“±ë¡í•˜ì‹œë©´ ì¸ê·¼ ì‹œì„¸ì—ì„œ ì•Œë¦¼ì„ ë“œë¦½ë‹ˆë‹¤.</p>
    <div class="progress-bar-container">
        <div class="step-indicator active" id="indicator1">
            <div class="step-circle">1</div>
            <div class="step-text">ì—°ë½ì •ë³´</div>
        </div>
        <div class="step-indicator" id="indicator2">
            <div class="step-circle">2</div>
            <div class="step-text">íŒë§¤/ì•Œë¦¼ ì •ë³´</div>
        </div>
    </div>
</div>
<input type="hidden" name="fvv" value="1">
<input type="hidden" name="pageHistory" value="0">
<input type="hidden" name="fbzx" value="3762433657792349989">
<input type="hidden" name="submissionTimestamp" value="-1">

<input type="hidden" id="phoneHidden" name="entry.1565385945" value="">
<input type="hidden" id="carNumberHidden" name="entry.1961657672" value="">
<input type="hidden" id="mileageHidden" name="entry.1352485596" value="">
<input type="hidden" id="manufacturerHidden" name="entry.803716616" value="">
<input type="hidden" id="carModelHidden" name="entry.1741764653" value="">
<input type="hidden" id="yearHidden" name="entry.1111075607" value="">
<input type="hidden" id="monthHidden" name="entry.180556191" value="">
<input type="hidden" id="consentHidden" name="entry.1204688294" value="" required>
<div class="step active" id="step1">
    <div class="step-content">
        <div class="section-title">1. ì—°ë½ì •ë³´ ì…ë ¥</div>
        <div class="input-group">
            <label for="name">ì„±í•¨</label>
            <div class="input-field-wrapper">
                <input type="text"
                    id="name"
                    name="entry.107496198" required
                    placeholder="ì„±í•¨ ì…ë ¥"
                    class="data-input-field">
            </div>
        </div>
        <div class="input-group">
            <label for="phone">ì „í™”ë²ˆí˜¸</label>
            <div class="input-field-wrapper">
                <div class="split-unit-wrapper">
                    <span class="phone-unit-box">010 -</span>
                    <input type="text"
                        id="phone"
                        name="phone_display"
                        required
                        placeholder="8ìë¦¬ ì…ë ¥"
                        inputmode="numeric"
                        maxlength="9"
                        class="phone-input-field data-input-field">
                </div>
            </div>
        </div>
    </div>
    <div class="footer-content">
        <div class="button-group">
            <button type="button" id="nextBtn" onclick="nextStep(1)">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
        </div>
    </div>
</div>

<div class="step" id="step2">
    <div class="step-content">
        <div class="section-title">2. íŒë§¤/ì•Œë¦¼ ì •ë³´ ì…ë ¥</div>

        <div class="input-group car-number-group stack-label-group">
            <label>ì°¨ëŸ‰ë²ˆí˜¸ ì…ë ¥ (ì˜ˆì‹œ : ì„œìš¸30ì•„1234)</label>
            <div class="input-field-wrapper">
                <div class="car-number-split-wrapper">
                    <button type="button" class="fixed-unit-button">ì„œìš¸</button>
                    <input type="text"
                        id="carNumPart1"
                        name="car_num_part1_display"
                        required
                        placeholder="2~3ìë¦¬"
                        maxlength="3"
                        inputmode="numeric"
                        class="num-part data-input-field">
                    <div class="select-box car-hangul-box">
                        <select id="carHangulSelect" required class="select-field">
                            <option value="" disabled selected>ì„ íƒ</option>
                            <option value="ì•„">ì•„</option>
                            <option value="ë°”">ë°”</option>
                            <option value="ì‚¬">ì‚¬</option>
                            <option value="ì">ì</option>
                        </select>
                    </div>
                    <input type="text"
                        id="carNumPart2"
                        name="car_num_part2_display"
                        required
                        placeholder="4ìë¦¬"
                        maxlength="4"
                        inputmode="numeric"
                        class="num-part data-input-field">
                </div>
            </div>
        </div>

        <div class="input-group stack-label-group">
            <label>ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²©</label>
            <div class="price-input-group">
                <div class="price-unit-box fixed-text">1ì–µ</div>
                <div class="price-input-wrapper">
                    <input type="text"
                        id="licensePriceInput"
                        name="license_price_display"
                        placeholder="ìˆ«ìì…ë ¥"
                        inputmode="numeric"
                        maxlength="3" class="data-input-field"
                        required>
                    <span class="price-unit-box embedded-unit">ë§Œì›</span>
                </div>
            </div>
        </div>

        <div class="input-group stack-label-group">
            <label>ì‹œì„¸ ì•Œë¦¼ ì‹ ì²­</label>
            <div class="input-field-wrapper">
                <div class="radio-group alert-option">
                    <input type="radio" id="alert_yes" name="entry.375840374" value="ì˜ˆ" required> <label for="alert_yes" class="radio-label">ì˜ˆ</label>
                    
                    <input type="radio" id="alert_no" name="entry.375840374" value="ì•„ë‹ˆì˜¤"> <label for="alert_no" class="radio-label">ì•„ë‹ˆì˜¤</label>
                </div>
            </div>
        </div>
        
        <div class="input-group stack-label-group">
            <label>ì œì¡°ì‚¬ ì„ íƒ</label>
            <div class="input-field-wrapper">
                <select id="manufacturerSelect" required class="select-field">
                    <option value="" disabled selected>ì œì¡°ì‚¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
                    <option value="í˜„ëŒ€ìë™ì°¨">í˜„ëŒ€ìë™ì°¨</option>
                    <option value="ê¸°ì•„">ê¸°ì•„</option>
                    <option value="ë¥´ë…¸ì½”ë¦¬ì•„">ë¥´ë…¸ì½”ë¦¬ì•„</option>
                    <option value="ì‰ë³´ë ˆ">ì‰ë³´ë ˆ</option>
                    <option value="ìŒìš©(KG)">ìŒìš©(KG)</option>
                    <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                </select>
            </div>
        </div>
        <div class="input-group stack-label-group">
            <label>ì°¨ì¢…ì„ íƒ</label>
            <div class="input-field-wrapper">
                <select id="carModelSelect" required class="select-field" disabled>
                    <option value="" disabled selected>ì°¨ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</option>
                </select>
            </div>
        </div>

        <div class="input-group stack-label-group">
            <label>ì¶œê³ ì‹œê¸°</label>
            <div class="input-field-wrapper">
                <div class="flex-row-wrap">
                    <div class="select-group">
                        <select id="yearSelect" required class="select-field">
                            <option value="" disabled selected>ë…„ë„</option>
                        </select>
                    </div>
                    <div class="select-group">
                        <select id="monthSelect" required class="select-field">
                            <option value="" disabled selected>ì›”</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-group stack-label-group">
            <label for="mileageInput">ìš´í–‰ê±°ë¦¬</label>
            <div class="input-field-wrapper">
                <div class="split-unit-wrapper">
                    <input type="text"
                        id="mileageInput"
                        name="mileage_display"
                        required
                        placeholder="ìˆ«ìì…ë ¥"
                        inputmode="numeric"
                        maxlength="4"
                        class="mileage-input-field data-input-field">
                    <span class="phone-unit-box" style="background-color: #5C6BC0; color: white;">ë§Œkm</span>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-content">
        <div class="consent-group">
            <input type="checkbox" id="consent" required>
            <label for="consent" class="consent-label">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</label>
        </div>
        <div class="consent-details">
            <p><strong>[ê°œì¸ì •ë³´ìˆ˜ì§‘ ë° ì´ìš©ë™ì˜ ìƒì„¸]</strong></p>
            <p>1. ìˆ˜ì§‘ í•­ëª©: ì„±í•¨, íœ´ëŒ€í° ë²ˆí˜¸, ì°¨ëŸ‰ë²ˆí˜¸, ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²©, ì•Œë¦¼ì‹ ì²­ ì—¬ë¶€, ì°¨ëŸ‰ì •ë³´(ì œì¡°ì‚¬, ì°¨ì¢…, ì¶œê³ ì‹œê¸°, ìš´í–‰ê±°ë¦¬)</p>
            <p>2. ìˆ˜ì§‘ ëª©ì : íƒì‹œë©´í—ˆ ì‹œì„¸ ë³€ë™ ì•Œë¦¼ ë° íŒë§¤ ìƒë‹´ ì§„í–‰</p>
            <p>3. ë³´ìœ  ë° ì´ìš© ê¸°ê°„: ë™ì˜ì¼ë¡œë¶€í„° 3ë…„ (ì•Œë¦¼ ë° ìƒë‹´ ì¢…ë£Œ í›„ ì§€ì²´ ì—†ì´ íŒŒê¸°)</p>
            <p>4. ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ: ìƒê¸° ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•˜ì§€ ì•Šì„ ê²½ìš°, ê°€ê²© ë“±ë¡ ë° ì•Œë¦¼ ì‹ ì²­ ì„œë¹„ìŠ¤ê°€ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p>â€» ì¶”ê°€ ë‚´ìš©: ë³¸ ì„œë¹„ìŠ¤ëŠ” ê·€í•˜ì˜ ë“±ë¡ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¸ê·¼ ì‹œì„¸ ì •ë³´ë¥¼ ì œê³µí•˜ë©°, ìµœì¢… ê±°ë˜ ê°€ê²©ì€ ì‹œì¥ ìƒí™© ë° ê°œë³„ í˜‘ìƒì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì œê³µëœ ì •ë³´ê°€ í—ˆìœ„ì¼ ê²½ìš°, ì•Œë¦¼ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
        <div class="button-group">
            <button type="button" class="prev-btn" onclick="prevStep(2)">&#8592;</button>
            <button type="submit" id="submitBtn">ì‹ ì²­í•˜ê¸°</button>
        </div>
    </div>
</div>
</form>
</div>
<iframe name="hidden_iframe" id="hidden_iframe"
    style="display:none;"
    onload="if(submitted) { alert('íƒì‹œë©´í—ˆ íŒë§¤í¬ë§ ê°€ê²© ë“±ë¡ ë° ì•Œë¦¼ ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.'); window.location='YOUR_THANK_YOU_PAGE_URL'; }" ></iframe>
<script>
let currentStep = 1;
const totalSteps = 2;
let submitted = false; // ì œì¶œ ìƒíƒœ í”Œë˜ê·¸

const phoneInput = document.getElementById('phone');
const phoneHidden = document.getElementById('phoneHidden');
const carNumPart1 = document.getElementById('carNumPart1');
const carNumPart2 = document.getElementById('carNumPart2');
const carHangulSelect = document.getElementById('carHangulSelect');
const carNumberHidden = document.getElementById('carNumberHidden');
const mileageInput = document.getElementById('mileageInput');
const mileageHidden = document.getElementById('mileageHidden');
const manufacturerSelect = document.getElementById('manufacturerSelect');
const manufacturerHidden = document.getElementById('manufacturerHidden');
const carModelSelect = document.getElementById('carModelSelect');
const carModelHidden = document.getElementById('carModelHidden');
const yearSelect = document.getElementById('yearSelect');
const yearHidden = document.getElementById('yearHidden');
const monthSelect = document.getElementById('monthSelect');
const monthHidden = document.getElementById('monthHidden');
const consentCheckbox = document.getElementById('consent');
const consentHidden = document.getElementById('consentHidden');

// âœ… ê°€ê²© ì…ë ¥ í•„ë“œ ë° Hidden í•„ë“œ
const licensePriceInput = document.getElementById('licensePriceInput');
const licensePriceHidden = document.createElement('input'); 
licensePriceHidden.type = 'hidden';
licensePriceHidden.name = 'entry.770593956'; // âœ… ê°€ê²© entry.ID ì ìš©
document.getElementById('carForm').appendChild(licensePriceHidden);

// âœ… ì‹œì„¸ ì•Œë¦¼ ë¼ë””ì˜¤ ë²„íŠ¼ (name ì†ì„±ìœ¼ë¡œ ì¡°íšŒ)
const alertOptionRadios = document.querySelectorAll('input[name="entry.375840374"]');


// ì°¨ì¢… ë°ì´í„° (ê°„ë‹¨ ì˜ˆì‹œ)
const carModels = {
    'í˜„ëŒ€ìë™ì°¨': ['ì˜ë‚˜íƒ€', 'ê·¸ëœì €', 'ì•„ì´ì˜¤ë‹‰'],
    'ê¸°ì•„': ['K5', 'K8', 'EV6'],
    'ë¥´ë…¸ì½”ë¦¬ì•„': ['SM6', 'XM3'],
    'ì‰ë³´ë ˆ': ['ë§ë¦¬ë¶€'],
    'ìŒìš©(KG)': ['í† ë ˆìŠ¤'],
    'ê¸°íƒ€': ['ê¸°íƒ€']
};

/**
* í•„ë“œ ê°’ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ë°°ê²½ìƒ‰ì„ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
* @param {HTMLElement} element - ì…ë ¥ ë˜ëŠ” ì„ íƒ í•„ë“œ ìš”ì†Œ.
*/
function checkCompletion(element) {
    let isCompleted = false;

    if (element.tagName === 'INPUT') {
        if (element.id === 'phone') {
            const phoneValue = element.value.replace(/[^0-9]/g, '');
            isCompleted = phoneValue.length === 8;
        } else if (element.id === 'carNumPart1') {
            isCompleted = element.value.trim().length >= 2;
        } else if (element.id === 'carNumPart2') {
            isCompleted = element.value.trim().length === 4;
        } else if (element.id === 'mileageInput') {
            isCompleted = element.value.trim() !== '' && !isNaN(parseInt(element.value.trim()));
        } else if (element.id === 'name') {
            isCompleted = element.value.trim() !== '';
        } else if (element.id === 'licensePriceInput') { // âœ… ê°€ê²© ì…ë ¥ í•„ë“œ
            isCompleted = element.value.trim() !== '' && !isNaN(parseInt(element.value.trim()));
        }
    } else if (element.tagName === 'SELECT') {
        // Select ìš”ì†Œì˜ ì™„ë£Œ ê²€ì‚¬
        isCompleted = element.value !== '' && element.options.length > 0 && !element.options[element.selectedIndex].disabled;
    }

    if (isCompleted) {
        element.classList.add('completed');
    } else {
        element.classList.remove('completed');
    }
}

// Select Boxì—ì„œ í™”ì‚´í‘œ í‘œì‹œ ì œì–´ (ì°¨ëŸ‰ë²ˆí˜¸ í•œê¸€ ì„ íƒì—ë§Œ ì‚¬ìš©)
function toggleSelectArrow(selectElement) {
    const selectBox = selectElement.parentElement;
    if (selectElement.value && selectElement.options.length > 0 && !selectElement.options[selectElement.selectedIndex].disabled) {
        selectBox.classList.add('selected');
    } else {
        selectBox.classList.remove('selected');
    }
}

carHangulSelect.addEventListener('change', function() {
    toggleSelectArrow(this);
    checkCompletion(this);
});


// ì°¨ì¢… ë¡œë“œ í•¨ìˆ˜
function loadCarModels(manufacturer) {
    carModelSelect.innerHTML = '<option value="" disabled selected>ì°¨ì¢…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</option>';
    if (manufacturer && carModels[manufacturer]) {
        carModels[manufacturer].forEach(model => {
            const option = document.createElement('option');
            option.value = model;
            option.textContent = model;
            carModelSelect.appendChild(option);
        });
        carModelSelect.disabled = false;
    } else {
        carModelSelect.disabled = true;
    }
    checkCompletion(carModelSelect);
}

// ì œì¡°ì‚¬ ì„ íƒ ì´ë²¤íŠ¸
manufacturerSelect.addEventListener('change', function() {
    loadCarModels(this.value);
    manufacturerHidden.value = this.value;
    checkCompletion(this);
});

// ì°¨ì¢… ì„ íƒ ì´ë²¤íŠ¸
carModelSelect.addEventListener('change', function() {
    carModelHidden.value = this.value;
    checkCompletion(this);
});

// ì¶œê³  ë…„/ì›” ì±„ìš°ê¸°
function populateYearMonth() {
    const currentYear = new Date().getFullYear();
    for (let i = 0; i < 20; i++) {
        const year = currentYear - i;
        const option = document.createElement('option');
        option.value = year;
        option.textContent = year + 'ë…„';
        yearSelect.appendChild(option);
    }
    for (let i = 1; i <= 12; i++) {
        const option = document.createElement('option');
        const monthText = i < 10 ? '0' + i : i;
        option.value = monthText;
        option.textContent = monthText + 'ì›”';
        monthSelect.appendChild(option);
    }
}
populateYearMonth();

yearSelect.addEventListener('change', function() {
    yearHidden.value = this.value;
    checkCompletion(this);
});

monthSelect.addEventListener('change', function() {
    monthHidden.value = this.value;
    checkCompletion(this);
});


document.getElementById('carForm').addEventListener('submit', function(event) {
    if (!validateStep1(true)) {
        updateStep(1);
        alert('1ë‹¨ê³„ ì—°ë½ì²˜ ì •ë³´ë¥¼ ë¨¼ì € ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        event.preventDefault();
        return;
    }
    if (!validateStep2()) {
        event.preventDefault();
        return;
    }

    // ìµœì¢… ë°ì´í„° ì„¤ì •
    mileageHidden.value = mileageInput.value.trim() + 'ë§Œkm';
    consentHidden.value = consentCheckbox.checked ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤';

    // âœ… ê°€ê²© Hidden í•„ë“œì— ê°’ ì„¤ì •
    licensePriceHidden.value = `1ì–µ ${licensePriceInput.value.trim()}ë§Œì›`;

    const part1Value = carNumPart1.value.trim();
    const part2Value = carNumPart2.value.trim();
    const hangulValue = carHangulSelect.value;
    carNumberHidden.value = `ì„œìš¸${part1Value}${hangulValue}${part2Value}`;

    submitted = true; // ì œì¶œ ì‹œì‘ í”Œë˜ê·¸ ì„¤ì •
});

function updateStep(step) {
    currentStep = step;
    for (let i = 1; i <= totalSteps; i++) {
        const stepElement = document.getElementById(`step${i}`);
        const indicatorElement = document.getElementById(`indicator${i}`);
        if (i === currentStep) {
            stepElement.classList.add('active');
            indicatorElement.classList.add('active');
            indicatorElement.classList.remove('completed');
        } else {
            stepElement.classList.remove('active');
            indicatorElement.classList.remove('active');
            if (i < currentStep) {
                indicatorElement.classList.add('completed');
            } else {
                indicatorElement.classList.remove('completed');
            }
        }
    }
    document.querySelector('.container').scrollTop = 0;
    window.scrollTo(0, 0);
}

function nextStep(step) {
    if (step === 1) {
        if (validateStep1(false)) {
            updateStep(2);
        }
    }
}

function prevStep(step) {
    if (step === 2) {
        updateStep(1);
    }
}

function validateStep1(isSubmit = false) {
    const nameInput = document.getElementById('name');
    const phoneValue = phoneInput.value.replace(/[^0-9]/g, '');
    if (!nameInput.value.trim()) {
        if (!isSubmit) alert('ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        if (!isSubmit) nameInput.focus();
        return false;
    }
    if (phoneValue.length !== 8) {
        if (!isSubmit) alert('ì „í™”ë²ˆí˜¸ ë’· 8ìë¦¬ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        if (!isSubmit) phoneInput.focus();
        return false;
    }
    // ì „í™”ë²ˆí˜¸ íˆë“  í•„ë“œ ê°’ ì„¤ì • (010-XXXX-XXXX)
    phoneHidden.value = '010-' + phoneValue.slice(0, 4) + '-' + phoneValue.slice(4);
    return true;
}

function validateStep2() {
    const part1Value = carNumPart1.value.trim();
    const part2Value = carNumPart2.value.trim();
    const hangulValue = carHangulSelect.value;

    // 1. ì°¨ëŸ‰ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
    if (part1Value.length < 2 || part1Value.length > 3 || !/^\d+$/.test(part1Value) || part2Value.length !== 4 || !/^\d{4}$/.test(part2Value) || !hangulValue) {
        alert('ì°¨ëŸ‰ë²ˆí˜¸ì˜ ëª¨ë“  ë¶€ë¶„(2~3ìë¦¬, ë¬¸ì, 4ìë¦¬)ì„ ì •í™•íˆ ì…ë ¥í•˜ê±°ë‚˜ ì„ íƒí•´ì£¼ì„¸ìš”.');
        if (!part1Value) carNumPart1.focus();
        else if (!hangulValue) carHangulSelect.focus();
        else carNumPart2.focus();
        return false;
    }

    // 2. ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²© ìœ íš¨ì„± ê²€ì‚¬
    const priceValue = licensePriceInput.value.trim();
    if (!priceValue || isNaN(parseInt(priceValue))) {
        alert('ë©´í—ˆíŒë§¤ í¬ë§ê°€ê²©ì„ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        licensePriceInput.focus();
        return false;
    }

    // 3. ì‹œì„¸ ì•Œë¦¼ ì‹ ì²­ ìœ íš¨ì„± ê²€ì‚¬
    const isAlertOptionSelected = Array.from(alertOptionRadios).some(radio => radio.checked);
    if (!isAlertOptionSelected) {
        alert('ì‹œì„¸ ì•Œë¦¼ ì‹ ì²­ ì—¬ë¶€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        document.getElementById('alert_yes').focus();
        return false;
    }

    // 4. ì°¨ì¢…/ì œì¡°ì‚¬ ìœ íš¨ì„± ê²€ì‚¬
    if (!manufacturerSelect.value || !carModelSelect.value || carModelSelect.disabled) {
        alert('ì œì¡°ì‚¬ ë° ì°¨ì¢…ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
        manufacturerSelect.focus();
        return false;
    }

    // 5. ì¶œê³ ì‹œê¸° ìœ íš¨ì„± ê²€ì‚¬
    if (!yearSelect.value || !monthSelect.value) {
        alert('ì¶œê³  ë…„ë„ì™€ ì›”ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
        if (!yearSelect.value) yearSelect.focus(); else monthSelect.focus();
        return false;
    }

    // 6. ìš´í–‰ê±°ë¦¬ ìœ íš¨ì„± ê²€ì‚¬
    const mileageValue = mileageInput.value.trim();
    if (!mileageValue || isNaN(parseInt(mileageValue))) {
        alert('ìœ íš¨í•œ ìš´í–‰ê±°ë¦¬ë¥¼ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        mileageInput.focus();
        return false;
    }

    // 7. ê°œì¸ì •ë³´ ë™ì˜ ìœ íš¨ì„± ê²€ì‚¬
    if (!consentCheckbox.checked) {
        alert('ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•´ì•¼ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        consentCheckbox.focus();
        return false;
    }
    return true;
}

// ************************************************************
// ì…ë ¥ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€: ë°°ê²½ìƒ‰ ì²´í¬ ë° ì •ë ¬
// ************************************************************
const inputFields = document.querySelectorAll('.data-input-field, .select-field');
inputFields.forEach(input => {
    input.addEventListener('input', function() { checkCompletion(this); });
    input.addEventListener('change', function() { checkCompletion(this); });
    input.addEventListener('focus', function() { this.classList.add('completed'); });
    input.addEventListener('blur', function() { checkCompletion(this); });
});

// ì „í™”ë²ˆí˜¸ í˜•ì‹ ì§€ì •
phoneInput.addEventListener('input', function(e) {
    let value = e.target.value.replace(/[^0-9]/g, '');
    if (value.length > 8) { value = value.slice(0, 8); }
    let result = '';
    if (value.length <= 4) { result = value; }
    else { result = value.slice(0, 4) + '-' + value.slice(4); }
    e.target.value = result;
    checkCompletion(e.target);
});

carNumPart1.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 3);
    checkCompletion(e.target);
});

carNumPart2.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 4);
    checkCompletion(e.target);
});

// âœ… ë©´í—ˆ í¬ë§ê°€ê²© ì…ë ¥ (ìˆ«ìë§Œ/ê¸¸ì´ ì œí•œ)
licensePriceInput.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 3);
    checkCompletion(e.target);
});

mileageInput.addEventListener('input', function(e) {
    e.target.value = e.target.value.replace(/[^0-9]/g, '').slice(0, 4);
    checkCompletion(e.target);
});


document.addEventListener('DOMContentLoaded', function() {
    updateStep(1);
    // ì´ˆê¸° ë¡œë”© ì‹œ ëª¨ë“  í•„ë“œì˜ ì™„ë£Œ ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë°°ê²½ìƒ‰ì„ ì„¤ì •í•©ë‹ˆë‹¤.
    document.querySelectorAll('.data-input-field, .select-field').forEach(element => {
        checkCompletion(element);
        if (element.tagName === 'SELECT') {
            toggleSelectArrow(element);
        }
    });
});
</script>
</body>
</html>
